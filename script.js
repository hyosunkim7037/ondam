const monksData = [
  {
    "id": "ISTJ",
    "name": "자장율사",
    "korean_name": "자장율사",
    "catchphrase": "계율의 화신",
    "quote": "나는 계율을 지키며 하루를 살다 죽을지언정, 계율을 깨뜨리고 백 년을 살고 싶지 않습니다.",
    "content": "<h3>\"계율의 화신, 7년 구도 끝에 문수보살을 만나다\"</h3><br><strong>📄 Episode 1. 가시방의 수행자</strong><br><br><strong>636년, 신라 서라벌 원녕사</strong><br><br>밤이 깊었다.<br>방 안은 칠흑 같은 어둠뿐이었지만, 자장의 눈은 감기지 않았다. 아니, 감을 수가 없었다. 머리 위에서 내려온 밧줄이 그의 상투를 천장에 단단히 고정시키고 있었기 때문이다.<br><br>고개를 조금만 숙여도 밧줄이 당겨지며 두피가 찢어질 듯 아팠다. 졸음이 밀려오면 고개가 떨어지고, 그 순간 날카로운 통증이 정신을 번쩍 들게 했다.<br><br>\"으윽...\"<br><br>신음이 새어 나왔다. 하지만 자장은 밧줄을 풀지 않았다. 대신 눈을 더욱 크게 뜨고, 앞에 놓인 해골을 응시했다.<br><br><em>이 해골도 한때는 살아 숨 쉬는 사람이었다. 웃고, 울고, 사랑하고, 미워했을 것이다. 그런데 지금은? 텅 빈 뼈만 남았다.</em><br><br>자장은 '고골관(枯骨觀)' 수행을 하고 있었다. 썩은 시체가 백골로 변해가는 과정을 관찰하며, 인생무상을 깨닫는 수행법이었다. 그는 스물여섯, 아직 젊은 나이였지만 이미 처자를 버리고 출가한 지 3년째였다.<br><br>방문을 두드리는 소리가 들렸다.<br><br>\"율사님, 선덕여왕 폐하께서 사신을 보내셨습니다.\"<br><br>시자의 목소리였다. 자장은 천천히 밧줄을 풀고 문을 열었다. 왕실의 사신은 공손히 절을 하며 비단에 싸인 교지를 내밀었다.<br><br>\"자장 율사께 태보(太保)의 벼슬을 내리노라.\"<br><br>태보. 왕의 스승이자 나라의 원로를 뜻하는 최고위 관직이었다. 하지만 자장의 표정은 차가웠다.<br><br>\"거절하겠습니다.\"<br><br>\"율사님, 이는 여왕 폐하의 뜻입니다. 신라의 불법을 위해...\"<br><br>\"신라의 불법을 위해서라면, 더더욱 이 자리를 받을 수 없습니다.\"<br><br>자장은 단호하게 말을 끊었다.<br><br>\"나는 계율을 지키며 하루를 살다 죽을지언정, 계율을 깨뜨리고 백 년을 살고 싶지 않습니다. <strong>吾寧一日持戒死 不願百年破戒而生(오녕일일지계사 불원백년파계이생).</strong> 이 뜻을 여왕 폐하께 전해주십시오.\"",
    "image": "ISTJ.jpg"
  },
  {
    "id": "ISTP",
    "name": "진묵대사",
    "korean_name": "진묵대사",
    "catchphrase": "신통력의 해결사",
    "quote": "곡차(술)를 가져오면 기도를 해드리겠소.",
    "content": "<h3>\"신통력의 전설, 말없이 기적을 행하다\"</h3><br><strong>📄 Episode 1. 상추로 불을 끄다</strong><br><br><strong>1580년, 전주 봉서사</strong><br><br>\"진묵아, 오늘은 네가 상추를 씻거라.\"<br><br>\"예, 스님.\"<br><br>열여덟 살 진묵은 사미승이었다. 아직 비구계를 받지 않은 어린 수행자였지만, 그의 눈빛은 보통 사람과 달랐다. 진묵은 광주리에 상추를 담아 냇가로 갔다. 함께 간 형님 스님들이 잡담을 나누는 동안, 진묵은 조용히 상추를 씻었다.<br><br><strong>철썩, 철썩.</strong><br><br>물소리가 경쾌했다. 진묵은 상추잎을 하나씩 정성스럽게 씻었다. 그런데...<br><br>\"어?\"<br><br>진묵의 손이 멈췄다. 눈동자가 흔들렸다. 그는 갑자기 하늘을 올려다봤다.<br><br><em>저기... 저기에...</em><br><br>진묵의 눈에는 다른 사람들이 보지 못하는 무언가가 보였다. 수백 리 떨어진 해인사 장경각에서 연기가 피어오르고 있었다.<br><br>\"불이다!\"<br><br>진묵은 손에 쥔 상추를 물에 적셨다. 그리고 하늘을 향해 <strong>확</strong> 뿌렸다.<br><br>\"진묵아, 뭐 하는 거야?\"<br><br>옆에 있던 형님 스님이 이상하게 쳐다봤다. 진묵은 대답하지 않고 계속 물을 뿌렸다.<br><br>\"아니, 왜 멀쩡한 상추에 물을 뿌리는 거야?\"<br><br>\"지금 해인사에 불이 났습니다.\"",
    "image": "ISTP.jpg"
  },
  {
    "id": "INTP",
    "name": "지눌국사",
    "korean_name": "지눌국사",
    "catchphrase": "한국 선의 설계자",
    "quote": "땅에서 넘어진 자, 땅을 짚고 일어서라.",
    "content": "<h3>세 번의 깨달음으로 한국 선의 뿌리를 세우다</h3><br><strong>〈Episode 1〉 청원사의 첫 번째 깨달음 - 성적등지</strong><br><br>1185년 늦가을, 전남 담양 청원사.<br><br>25세의 청년 승려 지눌은 작은 방에 홀로 앉아 있었다. 그의 앞엔 『육조단경六祖壇經』이 펼쳐져 있었다. 2년 전 개경의 보제사에서 함께 결사를 약속했던 10여 명의 동료들과 헤어진 후, 지눌은 홀로 이 외진 암자에서 수행 중이었다.<br><br>\"진여자성이 생각을 일으키면, 육근이 비록 보고 듣고 깨달아 알더라도 대상에 물들지 않고 항상 자재하다眞如自性起念 六根雖見聞覺知 不染萬像 而眞性常自在.\"<br><br>그 순간, 지눌의 손이 멈췄다.<br><br>\"......아!\"<br><br>책장을 넘기던 손가락에서 땀이 배어나왔다. 가슴이 뛰었다. 그동안 의문이었던 것이 한순간에 풀리는 느낌이었다.<br><br>\"그렇구나. 마음이 움직여도 본성은 흔들리지 않는구나. 깨어있음惺과 고요함寂이 함께하는 것. 이것이 정혜定慧로다!\"<br><br>지눌은 책을 덮고 밖으로 나갔다. 낙엽이 떨어지는 가을 산. 바람이 불어도 산은 흔들리지 않았다. 그제야 그는 알았다. '성적등지惺寂等持'. 깨어있으면서도 고요한 마음. 그것이 수행의 핵심이었다.",
    "image": "INTP.jpg"
  },
  {
    "id": "ENTJ",
    "name": "무학대사",
    "korean_name": "무학대사",
    "catchphrase": "왕조의 전략가",
    "quote": "돼지 눈엔 돼지만 보이고, 부처 눈엔 부처만 보입니다.",
    "content": "<h3>왕조를 설계한 전략가 승려</h3><br><strong>Episode 1 원나라 유학과 이성계와의 만남</strong><br><br>1360년대, 고려 말.<br><br>무학은 젊은 시절 원나라로 건너가 불법을 공부했다. 그곳에서 풍수지리와 음양오행, 그리고 정치철학까지 섭렵했다. 귀국 후 그는 전국을 떠돌며 수행했다.<br><br>1384년 어느 날, 함경도 산길.<br><br>무학이 걷고 있을 때, 저 멀리서 말 탄 장수 한 명이 다가왔다. 이성계였다.<br><br>\"이봐, 중!\"<br><br>이성계가 무학을 보며 소리쳤다.<br><br>\"그대, 영락없는 돼지처럼 생겼구려!\"<br><br>주변 병사들이 웃음을 터뜨렸다. 하지만 무학은 태연하게 합장하며 대답했다.<br><br>\"장군, 소승의 눈엔 장군께서 부처님처럼 보입니다.\"",
    "image": "ENTJ.png"
  },
  {
    "id": "ISFP",
    "name": "법정스님",
    "korean_name": "법정스님",
    "catchphrase": "무소유의 예술가",
    "quote": "무소유란 아무것도 갖지 않는 것이 아니라, 불필요한 것을 갖지 않는 것이다.",
    "content": "<h3>무소유를 몸으로 실천한 예술가</h3><br><strong>〈Episode 1〉 서울을 등지다 - 1975년의 결단</strong><br><br>1975년 10월, 서울.<br><br>43세의 법정 스님은 짐을 꾸리고 있었다. 오랫동안 머물던 서울의 주지 자리를 내려놓기로 결심한 참이었다.<br><br>\"스님, 정말 가시렵니까?\"<br><br>상좌 하나가 안타까운 표정으로 물었다.<br><br>\"그래야 한다.\"<br><br>법정은 짐을 꾸리는 손을 멈추지 않았다. 1970년대 초반, 그는 민주화운동에 깊이 관여했다. 독재정권에 맞서 청년들과 함께 거리에 나섰고, 양심수를 돕는 일에 앞장섰다. 하지만 1974년 인혁당 사건 이후 상황이 달라졌다. 정부의 감시가 심해졌고, 주변 사람들이 연루될까 두려웠다.<br><br>\"나 때문에 다른 이들이 고생할 수 없다. 떠나야 한다.\"",
    "image": "ISFP.png"
  },
  {
    "id": "ENFP",
    "name": "만해 한용운",
    "korean_name": "만해 한용운",
    "catchphrase": "자유의 불꽃",
    "quote": "님은 갔습니다. 아아 사랑하는 나의 님은 갔습니다.",
    "content": "<h3>자유를 외치는 불꽃 같은 선지자</h3><br><strong>개혁의 깃발을 들다</strong><br><br><strong>첫 번째 이야기: 1910년 백담사, 개혁의 깃발을 들다</strong><br><br>1910년 늦가을, 강원도 인제 백담사. 32세의 승려 한용운은 창밖으로 내리는 첫눈을 바라보며 붓을 들었다. 조선은 이미 일본에 국권을 빼앗겼고, 500년간 억불정책에 시달린 불교는 산속 깊이 숨어 있었다.<br><br>\"이대로는 안 된다.\"<br><br>그는 원고지 위에 제목을 썼다. 『조선불교유신론(朝鮮佛敎維新論)』. 밤마다 촛불을 켜고 붓을 움직였다. <strong>승려의 결혼 허용, 도시 포교 활성화, 사찰 운영의 민주화, 여성의 출가 허용.</strong> 당시로서는 파격적인, 아니 혁명적인 주장이었다.",
    "image": "ENFP.png"
  },
  {
    "id": "INFP",
    "name": "탄허스님이",
    "korean_name": "탄허스님",
    "catchphrase": "시대의 예언자",
    "quote": "미래를 아는 것이 도가 아니다. 흐름을 읽을 뿐이다.",
    "content": "<h3>시대를 꿰뚫는 지혜로운 예언자</h3><br><strong>1936년, 23세 청년 스님의 장자 강의</strong><br><br>1936년 봄, 경상남도 통도사. 23세의 젊은 승려 탄허가 『장자(莊子)』 강의를 시작한다는 소문이 퍼졌다. 당대 최고의 지식인들이 하나둘 모여들었다. 그 중에는 함석헌 선생과 양주동 박사도 있었다.<br><br>강의실에 들어선 양주동 박사는 속으로 의아해했다.<br><br>'저렇게 젊은 승려가 장자를 강의한다고?'<br><br>하지만 강의가 시작되자 그의 생각은 완전히 바뀌었다. 탄허는 장자의 난해한 철학을 유불도(儒佛道) 삼교를 넘나들며 풀어냈다. 철학적 깊이와 언어의 유려함이 압도적이었다.<br><br>\"장자가 말한 '소요유(逍遙遊)'는 단순히 자유롭게 노니는 것이 아닙니다. 그것은 모든 집착에서 벗어난 절대적 자유입니다. 불교에서 말하는 '해탈'과 같은 것이지요.\"",
    "image": "INFP.jpg"
  },
  {
    "id": "ESFP",
    "name": "성철스님",
    "korean_name": "성철스님",
    "catchphrase": "백련암의 호랑이",
    "quote": "산은 산이요, 물은 물이로다.",
    "content": "<h3>백련암의 호랑이, 산은 산이요 물은 물이로다</h3><br><strong>1940년대, 어머니를 돌려보낸 철저한 수행자</strong><br><br>1940년대 겨울, 경상남도 통도사 백련암. 젊은 승려 성철은 동안거(冬安居) 수행 중이었다. 매일 새벽 3시에 일어나 참선하고, 하루 한 끼만 먹으며 철저히 수행했다.<br><br>어느 날, 시자승이 황급히 뛰어왔다.<br><br>\"스님! 어머님께서 오셨습니다!\"<br><br>성철의 어머니는 며칠을 걸어 백련암까지 찾아왔다. 산 아래에서 늙은 어머니가 울부짖었다.<br><br>\"영주야! 어미 얼굴 한 번만 보고 가자!\"<br><br>시자승이 다시 간청했다.<br><br>\"스님, 어머님께서 그렇게 우시는데...\"<br><br>성철은 방문을 열지 않고 조용히 말했다.<br><br>\"돌려보내라. 나는 만나지 않겠다.\"",
    "image": "ESFP.jpg"
  },
  {
    "id": "INTJ",
    "name": "의상대사",
    "korean_name": "의상대사",
    "catchphrase": "화엄의 건축가",
    "quote": "하나 속에 일체가 있고, 일체 속에 하나가 있다.",
    "content": "<h3>의상대사의 \"하나가 곧 전체\" - 시스템 사상가의 삶</h3><br><strong>인드라망의 건축가, 의상</strong><br><br><strong>648년, 당나라 유학길 - 원효와의 이별</strong><br><br>648년 봄, 신라 황룡사 앞. 두 젊은 승려가 서 있었다. 의상(23세)과 원효(28세).<br><br>원효가 말했다.<br><br>\"의상, 우리 함께 당나라로 가자. 저 넓은 세상에서 진짜 불법을 배워보자.\"<br><br>의상이 고개를 끄덕였다.<br><br>\"그러자. 이 좁은 신라에서는 진리를 다 담을 수 없다.\"<br><br>두 사람은 서해안을 향해 걸었다. 며칠을 걸어 해골물 사건이 일어난 토굴에 도착했다. 밤에 목이 말라 물을 마셨는데, 아침에 보니 해골에 고인 썩은 물이었다.<br><br>원효는 그 순간 깨달았다.<br><br>\"일체유심조(一切唯心造)! 모든 것은 마음이 만드는구나!\"<br><br>원효는 유학을 포기하고 신라로 돌아갔다. 하지만 의상은 달랐다.<br><br>\"나는 가야 한다. 진리의 '체계'를 배워야 한다.\"",
    "image": "pixel_monk_3.png"
  },
  {
    "id": "ENTP",
    "name": "경허스님",
    "korean_name": "경허스님",
    "catchphrase": "파격의 혁명가",
    "quote": "옳고 그름에 얽매이지 마라. 네 안의 부처를 보라.",
    "content": "<h3>규칙을 부순 혁명가</h3><br><strong>취광승(醉狂僧), 미친 듯 살다 간 자유인</strong><br><br><strong>1879년, 9세 출가 - “왜 하늘은 파랗습니까?”</strong><br><br>1879년 봄, 전라북도 전주.<br><br>9살 소년이 집을 나섰다. 이름은 송성월(宋性月), 훗날의 경허였다.<br><br>어머니가 붙잡으며 울었다.<br><br>“성월아! 어디 가니!”<br><br>소년은 담담히 말했다.<br><br>“스님이 되러 갑니다.”<br><br>“왜 하필 스님이냐?”<br><br>소년의 눈이 반짝였다.<br><br>“어머니, 왜 하늘은 파랗습니까? 왜 사람은 죽습니까? 왜 배고프면 슬픕니까? 이 모든 게 궁금합니다.”",
    "image": "pixel_monk_4.png"
  },
  {
    "id": "ESTJ",
    "name": "보우스님",
    "korean_name": "보우스님",
    "catchphrase": "호국의 행정가",
    "quote": "나는 나라를 위해 일했다. 후회하지 않는다.",
    "content": "<h3>칼 든 승려, 나라를 지키다</h3><br><strong>호국의 전략가, 체제 안에서 싸운 현실주의자</strong><br><br><strong>1509년, 태어나다 - “이 나라는 불교를 버렸다”</strong><br><br>1509년, 조선 중종 4년. 경상도 밀양.<br><br>한 아이가 태어났다. 이름은 이옥(李鈺), 훗날의 보우였다.<br><br>이 시대 조선은 <strong>유교 국가</strong>였다. 불교는 탄압받았다.<br><br>아버지가 아들에게 말했다.<br><br>“옥아, 너는 과거시험을 봐서 관리가 되어야 한다. 그것만이 출세하는 길이다.”<br><br>“네, 아버지.”<br><br>하지만 어린 보우는 다른 생각을 했다.<br><br>‘왜 불교는 탄압받는가? 왜 승려들은 천민 취급받는가? 고려시대엔 그렇지 않았는데…’",
    "image": "pixel_monk_5.png"
  },
  {
    "id": "ESFJ",
    "name": "원광법사",
    "korean_name": "원광법사",
    "catchphrase": "다정한 스승",
    "quote": "살생을 하되 가려서 하라 (살생유택).",
    "content": "<h3>“싫다는데 왜 자꾸 부탁해?”</h3><br><strong>모두의 스승, 거절 못하는 완벽주의자</strong><br><br><strong>542년, 태어나다 - “왜 다들 싸우는 거죠?”</strong><br><br>542년, 신라 진흥왕 3년. 경주 어느 마을.<br><br>한 아이가 태어났다. 이름은 설(薛), 훗날의 원광이었다.<br><br>어린 원광은 다른 아이들과 달랐다.<br><br>동네 아이들이 싸우면, 원광이 달려가 말렸다.<br><br>“싸우지 마! 같이 놀면 되잖아!”<br><br>“원광아, 네가 상관할 일 아니야!”<br><br>“하지만 싸우면 다들 다치잖아. <strong>내가 중간에서 조정할게!</strong>”",
    "image_placeholder": "esfj_monk.png"
  },
  {
    "id": "INFJ",
    "name": "원효대사",
    "korean_name": "원효대사",
    "catchphrase": "고독한 천재",
    "quote": "모든 것은 마음이 만드는구나 (일체유심조).",
    "content": "<h3>“사람들이 날 이해 못 해…”</h3><br><strong>파격의 철학자, 세상과 사랑에 빠진 구도자</strong><br><br><strong>617년, 태어나다 - “왜 나만 이런 생각을 하지?”</strong><br><br>617년, 신라 진평왕 39년. 경상북도 압량군.<br><br>한 아이가 태어났다. 이름은 서당(誓幢), 훗날의 원효였다.<br><br>어린 원효는 혼자 있는 걸 좋아했다. 다른 아이들이 놀 때, 원효는 강가에 앉아 생각에 잠겼다.<br><br>‘물은 왜 흐를까? 사람은 왜 죽을까?’<br><br>어머니가 불렀다.<br><br>“원효야! 친구들이랑 놀지 그러니?”<br><br>“어머니, 저는 혼자 있는 게 좋아요. 친구들은 제 이야기를 이해 못 해요.”",
    "image": "INFJ.jpg"
  },
  {
    "id": "ISFJ",
    "name": "혜심스님",
    "korean_name": "혜심스님",
    "catchphrase": "묵묵한 수호자",
    "quote": "대가를 바라지 않고 하는 것이 진정한 섬김이다.",
    "content": "<h3>“내가 해줘도 고마운 줄을 모르네”</h3><br><strong>묵묵한 수호자, 인정받지 못해도 계속 돌보는 사람</strong><br><br><strong>1178년, 태어나다 - “다른 사람 먼저”</strong><br><br>1178년, 고려 명종 8년. 전라남도 나주.<br><br>한 아이가 태어났다. 이름은 최우(崔瑀), 훗날의 혜심이었다.<br><br>어린 혜심은 조용하고 착한 아이였다.<br><br>어느 날, 마을에 과일이 조금 있었다. 아이들이 다투며 먹으려 했다.<br><br>혜심은 가장 작은 과일을 골랐다.<br><br>어머니가 물었다.<br><br>“혜심아, 왜 작은 걸 가져가니?”<br><br>“다른 친구들이 큰 거 먹으면 좋아할 것 같아서요.”<br><br>“하지만 너도 큰 거 먹고 싶지 않니?”<br><br>혜심은 고개를 저었다.<br><br>“괜찮아요. <strong>다른 사람이 행복하면 저도 행복해요.</strong>”",
    "image_placeholder": "isfj_monk.png"
  },
  {
    "id": "ENFJ",
    "name": "사명대사",
    "korean_name": "사명대사",
    "catchphrase": "구국의 영웅",
    "quote": "백성을 구하는 것이 곧 부처의 뜻이다.",
    "content": "임진왜란이 터지자 49세의 나이에 승병을 조직해 평양성 탈환을 이끌었습니다. 전쟁이 끝난 후에는 적국인 일본으로 건너가 끈질긴 외교 담판 끝에 3,500명의 조선 포로를 데려왔습니다.\n\n그는 모든 짐을 혼자 짊어지려 했습니다. '다 잘되게 하려니까 나만 힘들다'며 번아웃을 겪기도 했지만, 백성을 향한 뜨거운 책임감으로 끝까지 버텨낸 진정한 영웅이었습니다.",
    "image": "ENFJ.jpg"
  },
  {
    "id": "ESTP",
    "name": "서산대사",
    "korean_name": "서산대사",
    "catchphrase": "행동파 승려",
    "quote": "지금 아니면 언제 하겠느냐? 일단 저질러라.",
    "content": "과거 시험도 벼락치기로 합격하고, 전국을 방랑하며 몸으로 깨달음을 얻었습니다. 73세의 노구에 임진왜란이 터지자 '지금 아니면 언제 싸우냐'며 가장 먼저 승병을 일으켰습니다.\n\n화살이 빗발치는 전장에서도 물러서지 않았고, 교리와 참선을 통합하는 문제도 '일단 해보자'는 식으로 해결했습니다. 복잡한 이론보다 즉각적인 행동을 믿었던 불교계의 행동대장이었습니다.",
    "image": "ESTP.jpg"
  }
];

document.addEventListener('DOMContentLoaded', () => {
  init();
});

let currentMonk = null;
let isAudioPlaying = false;
let player;

function init() {
  // Load YouTube IFrame API
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // Simulate loading
  const loadingScreen = document.getElementById('loading-screen');
  const mainContent = document.getElementById('main-content');

  setTimeout(() => {
    selectRandomMonk();

    loadingScreen.style.opacity = '0';
    loadingScreen.style.transition = 'opacity 0.5s ease-out';

    setTimeout(() => {
      loadingScreen.classList.add('hidden');
      loadingScreen.classList.remove('active');
      mainContent.classList.remove('hidden');
    }, 500);

  }, 2500);

  setupEventListeners();
}

// YouTube API Ready Function
function onYouTubeIframeAPIReady() {
  player = new YT.Player('youtube-player', {
    height: '0',
    width: '0',
    videoId: 'Ut9Xjq_4__A',
    playerVars: {
      'playsinline': 1,
      'loop': 1,
      'playlist': 'Ut9Xjq_4__A', // Required for loop to work
      'controls': 0
    },
    events: {
      'onReady': onPlayerReady
    }
  });
}

function onPlayerReady(event) {
  // Player is ready
  // We don't auto-play because browsers block unmuted autoplay
}

function selectRandomMonk() {
  const randomIndex = Math.floor(Math.random() * monksData.length);
  currentMonk = monksData[randomIndex];

  renderMonk(currentMonk);
}

function renderMonk(monk) {
  document.getElementById('monk-name').textContent = monk.name;
  document.getElementById('monk-mbti').textContent = monk.id;
  document.getElementById('monk-catchphrase').textContent = monk.catchphrase;
  document.getElementById('monk-quote').textContent = `"${monk.quote}"`;

  const imgElement = document.getElementById('monk-image');

  if (monk.image) {
    imgElement.src = monk.image;
  } else {
    // Use generated Tanghwa style images
    // We have 3 variations, so we'll cycle through them based on the monk's name length
    const tanghwaImages = [
      'tanghwa_monk_1.png', // Sitting/Meditating
      'tanghwa_monk_2.png', // Standing/Wise
      'tanghwa_monk_3.png'  // Dynamic/Laughing
    ];

    // Deterministic selection
    const imageIndex = monk.name.charCodeAt(0) % tanghwaImages.length;
    imgElement.src = tanghwaImages[imageIndex];
  }

  imgElement.alt = `${monk.name} Illustration`;

  document.getElementById('modal-title').textContent = monk.name;
  // Use innerHTML to render HTML content (bold, breaks)
  document.getElementById('modal-text').innerHTML = monk.content;
}

function setupEventListeners() {
  // Modal
  // Modal
  const btnStory = document.getElementById('btn-story-envelope');
  const modal = document.getElementById('story-modal');
  const btnCloseModal = document.getElementById('btn-close-modal');
  const modalOverlay = document.querySelector('.modal-overlay');

  btnStory.addEventListener('click', () => {
    // Play animation
    btnStory.classList.add('open');

    // Wait for animation then open modal
    setTimeout(() => {
      modal.classList.remove('hidden');
    }, 600);
  });

  const closeModal = () => {
    modal.classList.add('hidden');
    // Reset envelope
    setTimeout(() => {
      btnStory.classList.remove('open');
    }, 300);
  };

  btnCloseModal.addEventListener('click', closeModal);
  modalOverlay.addEventListener('click', closeModal);

  // Share
  const btnShare = document.getElementById('btn-share');
  btnShare.addEventListener('click', async () => {
    if (navigator.share) {
      try {
        await navigator.share({
          title: '십육성좌의 깨달음',
          text: `${currentMonk.name} - ${currentMonk.quote}\n#십육성좌 #불교MBTI`,
          url: window.location.href,
        });
      } catch (err) {
        console.log('Error sharing:', err);
      }
    } else {
      const textToCopy = `${currentMonk.name} - "${currentMonk.quote}"\n${window.location.href}`;
      navigator.clipboard.writeText(textToCopy).then(() => {
        alert('내용이 클립보드에 복사되었습니다.');
      }).catch(err => {
        console.error('Failed to copy:', err);
      });
    }
  });

  // Audio
  const btnAudio = document.getElementById('btn-audio');
  const iconOff = document.getElementById('icon-audio-off');
  const iconOn = document.getElementById('icon-audio-on');

  btnAudio.addEventListener('click', () => {
    isAudioPlaying = !isAudioPlaying;

    if (isAudioPlaying) {
      iconOff.classList.add('hidden');
      iconOn.classList.remove('hidden');
      if (player && player.playVideo) {
        player.playVideo();
      }
    } else {
      iconOff.classList.remove('hidden');
      iconOn.classList.add('hidden');
      if (player && player.pauseVideo) {
        player.pauseVideo();
      }
    }
  });
}
